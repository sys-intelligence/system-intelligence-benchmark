--- a/checker/server/src/main/java/org/disalg/remix/server/ReplayService.java
+++ b/checker/server/src/main/java/org/disalg/remix/server/ReplayService.java
@@ -75,6 +75,9 @@ public class ReplayService implements RemoteService {

     // writer
     private FileWriter statisticsWriter;
     private FileWriter executionWriter;
+    private FileWriter ndjsonWriter;  // NDJSON trace output
+    private int ndjsonStepCounter = 0;  // Step counter for NDJSON events
+    private String ndjsonOutputPath = null;  // Path from environment variable
     private FileWriter bugReportWriter;
     private FileWriter matchReportWriter;

@@ -387,6 +390,18 @@ public class ReplayService implements RemoteService {
             // create trace execution file
             executionWriter = new FileWriter(schedulerConfiguration.getWorkingDir() + File.separator
                     + traceName + File.separator + schedulerConfiguration.getExecutionFile());
+
+            // Initialize NDJSON writer if NDJSON_OUTPUT environment variable is set
+            ndjsonOutputPath = System.getenv("NDJSON_OUTPUT");
+            if (ndjsonOutputPath != null && !ndjsonOutputPath.isEmpty()) {
+                try {
+                    ndjsonWriter = new FileWriter(ndjsonOutputPath);
+                    ndjsonStepCounter = 0;
+                    LOG.info("NDJSON output enabled: {}", ndjsonOutputPath);
+                } catch (IOException e) {
+                    LOG.warn("Failed to create NDJSON writer: {}", e.getMessage());
+                }
+            }
+
             // create trace statistics file
             statisticsWriter = new FileWriter(schedulerConfiguration.getWorkingDir() + File.separator
                     + traceName + File.separator + schedulerConfiguration.getStatisticsFile());
@@ -750,6 +765,10 @@ public class ReplayService implements RemoteService {
                     committedLogVerifier.close();
                     LOG.info("committedLogVerifier closed");
                 }
+                if (ndjsonWriter != null) {
+                    ndjsonWriter.close();
+                    LOG.info("NDJSON writer closed: {}", ndjsonOutputPath);
+                }
 //                if (!matchedAndPassed) {
 //                    bugCount++;
 //                }
@@ -1008,6 +1027,26 @@ public class ReplayService implements RemoteService {
         return id;
     }

+    /**
+     * Write event to NDJSON file if enabled.
+     *
+     * @param eventName Name of the event
+     * @param nodeId Node identifier
+     * @param subnodeId Subnode identifier
+     * @param metadata Additional event metadata
+     */
+    private void writeNdjsonEvent(String eventName, int nodeId, int subnodeId, JSONObject metadata) {
+        if (ndjsonWriter != null) {
+            try {
+                JSONObject event = new JSONObject();
+                event.put("event", eventName);
+                event.put("step", ndjsonStepCounter++);
+                event.put("node", "s" + nodeId);
+                event.put("subnode", subnodeId);
+                if (metadata != null) {
+                    event.put("data", metadata);
+                }
+                ndjsonWriter.write(event.toJSONString() + "\n");
+                ndjsonWriter.flush();
+            } catch (IOException e) {
+                LOG.warn("Failed to write NDJSON event: {}", e.getMessage());
+            }
+        }
+    }
+
     @Override
     public int offerElectionMessage(final int sendingSubnodeId,
                                     final int receivingNodeId,
@@ -1070,6 +1109,16 @@ public class ReplayService implements RemoteService {
             LOG.debug("{} {} of Node {} is about to send an election message ({}): msgId = {}, " +
                             "set subnode {} to SENDING state",
                     SubnodeType.QUORUM_PEER, sendingSubnodeId, sendingNodeId, payload, id, sendingSubnodeId);
+
+            // Write to NDJSON
+            JSONObject metadata = new JSONObject();
+            metadata.put("type", "election_message");
+            metadata.put("receiver", receivingNodeId);
+            metadata.put("electionEpoch", electionEpoch);
+            metadata.put("leader", leader);
+            metadata.put("payload", payload);
+            writeNdjsonEvent("ElectionMessage", sendingNodeId, sendingSubnodeId, metadata);
+
             addEvent(electionMessageEvent);
             subnode.setState(SubnodeState.SENDING);
             try {
@@ -1125,6 +1174,14 @@ public class ReplayService implements RemoteService {
             LOG.debug("{} {} of Node {} is about to send message ({}): msgId = {}, " +
                             "set subnode {} to SENDING state",
                     SubnodeType.SYNC_PROCESSOR, sendingSubnodeId, sendingNodeId, payload, id, sendingSubnodeId);
+
+            // Write to NDJSON
+            JSONObject metadata = new JSONObject();
+            metadata.put("type", "follower_to_leader");
+            metadata.put("zxid", zxid);
+            metadata.put("messageType", type);
+            metadata.put("payload", payload);
+            writeNdjsonEvent("FollowerToLeaderMessage", sendingNodeId, sendingSubnodeId, metadata);
+
             addEvent(followerToLeaderMessageEvent);
             subnode.setState(SubnodeState.SENDING);
             try {
@@ -1181,6 +1238,15 @@ public class ReplayService implements RemoteService {
             LOG.debug("{} {} of Node {} is about to send message ({}): msgId = {}, " +
                             "set subnode {} to SENDING state",
                     subnodeType, sendingSubnodeId, sendingNodeId, payload, id, sendingSubnodeId);
+
+            // Write to NDJSON
+            JSONObject metadata = new JSONObject();
+            metadata.put("type", "leader_to_follower");
+            metadata.put("receivingAddr", receivingAddr);
+            metadata.put("zxid", zxid);
+            metadata.put("messageType", type);
+            metadata.put("payload", payload);
+            writeNdjsonEvent("LeaderToFollowerMessage", sendingNodeId, sendingSubnodeId, metadata);
+
             addEvent(leaderToFollowerMessageEvent);
             subnode.setState(SubnodeState.SENDING);
             try {
@@ -1234,6 +1300,14 @@ public class ReplayService implements RemoteService {
             LOG.debug("{} {} of Node {} is about to process the request ({}): msgId = {}, " +
                     "set subnode {} to SENDING state", subnodeType, subnodeId, nodeId, payload, id, subnodeId);
+
+            // Write to NDJSON
+            JSONObject metadata = new JSONObject();
+            metadata.put("type", "local_event");
+            metadata.put("subnodeType", subnodeType.toString());
+            metadata.put("zxidOrEpoch", zxidOrEpoch);
+            metadata.put("eventType", type);
+            metadata.put("payload", payload);
+            writeNdjsonEvent("LocalEvent", nodeId, subnodeId, metadata);
+
             addEvent(localEvent);
             subnode.setState(SubnodeState.SENDING);
             if (SubnodeType.COMMIT_PROCESSOR.equals(subnodeType)) {
